{
	"Name":"ProBuilder Unity Package Manager",
	"UnityPath":[
		"C:/Users/$USER/unity/unity/build/WindowsEditor",
		"/Users/$USER/unity/unity/build/MacEditor/Unity.app",
		"C:/Users/$USER/unity/build/WindowsEditor",
		"/Users/$USER/unity/build/MacEditor/Unity.app",
	],
	"Macros": {
		"$DST_PROJECT_ROOT": "bin/projects/ProBuilder-trunk/Assets",
		"$SRC_PB_ROOT": "probuilder2.0/Assets/ProCore/ProBuilder",
		"$DST_PB_ROOT": "../com.unity.probuilder-dll/ProBuilder",
		"$DST_PB_NAME": "ProBuilder",
		"$UNITY_VERSION": "trunk",
		"$UPM_PACKAGE_DIR": "../com.unity.probuilder-dll",
		"$BUILD_DIR": "../com.unity.probuilder-dll",
	},
	"Defines": [
		"PROBUILDER_DLL",
		"PROBUILDER_UPM"
		"UNITY_5_OR_NEWER",
		"UNITY_5_3_OR_NEWER"
		"UNITY_5_5_OR_NEWER",
		"UNITY_5_6_OR_NEWER",
		"UNITY_2017_1_OR_NEWER",
		"UNITY_2017_2_OR_NEWER",
		"UNITY_2017_3_OR_NEWER",
		"UNITY_2018_1_OR_NEWER",
		"UNITY_2018_1",
	],
	"Clean":[
		{ "Command":"rm", "Arguments": [
			"$UPM_PACKAGE_DIR/ProBuilder",
			"$UPM_PACKAGE_DIR/ProBuilder.meta",
			"$UPM_PACKAGE_DIR/CHANGELOG.md"
			"$UPM_PACKAGE_DIR/Documentation/com.unity.probuilder.md"
		]}
	],
	"OnPreBuild":[
		// get version number with build type marker for pb_VersionInfo
		{ "Command":"find", "Arguments": [ "$SRC_PB_ROOT/About/changelog.txt", "(?<=\\[)([0-9]+\\.[0-9]+\\.[0-9]+.*)(?=\\])" ] },
		// set version info in pb_VersionInfo
		{ "Command":"replace", "Arguments": [ "$SRC_PB_ROOT/Classes/ClassesCore/pb_Version.cs", "(?<=new pb_VersionInfo\\(\")[0-9a-zA-Z\\-\\.]+", "GetFindVar(0)" ] },
		// set build date in pb_VersionInfo
		{ "Command":"replace", "Arguments": [ "$SRC_PB_ROOT/Classes/ClassesCore/pb_Version.cs", "(?<=\")en-US:\\s[0-9]{1,2}-[0-9]{1,2}-[0-9]{4}", "$DATE" ] },
		// set version number in upm-project package.json
		{ "Command":"replace", "Arguments": [ "$UPM_PACKAGE_DIR/package.json" "(?<=\"version\":\\s*\")[0-9a-zA-Z\\-\\.]+", "GetFindVar(0)" ] },
		{ "Command":"cp", "Arguments": [ "$SRC_PB_ROOT", "$BUILD_DIR/$DST_PB_NAME" ] },
		{ "Command":"cp", "Arguments": [ "$SRC_PB_ROOT.meta", "$BUILD_DIR/$DST_PB_NAME.meta" ] },
		{ "Command":"rm", "Arguments": [ "$DST_PB_ROOT/AssetIdRemapUtility/Editor" ] },
		{ "Command":"mkdir", "Arguments": [ "$DST_PB_ROOT/AssetIdRemapUtility/Editor" ] },
		{ "Command":"rm", "Arguments": [ "$DST_PB_ROOT/Classes/ClassesCore" ] },
		{ "Command":"rm", "Arguments": [ "$DST_PB_ROOT/Classes/ClassesEditing" ] },
		{ "Command":"rm", "Arguments": [ "$DST_PB_ROOT/Editor/EditorCore" ] },
		{ "Command":"rm", "Arguments": [ "$DST_PB_ROOT/Classes/ClassesCore.meta" ] },
		{ "Command":"rm", "Arguments": [ "$DST_PB_ROOT/Classes/ClassesEditing.meta" ] },
		{ "Command":"rm", "Arguments": [ "$DST_PB_ROOT/Editor/EditorCore.meta" ] },
		{ "Command":"rm", "Arguments": [ "$DST_PB_ROOT/Data" ] },
		{ "Command":"rm", "Arguments": [ "$DST_PB_ROOT/Data.meta" ] },
		{ "Command":"rm", "Arguments": [ "$DST_PB_ROOT/API Examples" ] },
		{ "Command":"rm", "Arguments": [ "$DST_PB_ROOT/API Examples.meta" ] },
		{ "Command":"cp", "Arguments": [ "build/targets/resources/$UNITY_VERSION/ProBuilderCore.dll.meta", "$DST_PB_ROOT/Classes/ProBuilderCore.dll.meta" ] },
		{ "Command":"cp", "Arguments": [ "build/targets/resources/$UNITY_VERSION/ProBuilderMeshOps.dll.meta", "$DST_PB_ROOT/Classes/ProBuilderMeshOps.dll.meta" ] },
		{ "Command":"cp", "Arguments": [ "build/targets/resources/$UNITY_VERSION/ProBuilderEditor.dll.meta", "$DST_PB_ROOT/Editor/ProBuilderEditor.dll.meta" ] },
		{ "Command":"cp", "Arguments": [ "build/targets/resources/$UNITY_VERSION/AssetIdRemapUtility.dll.meta", "$DST_PB_ROOT/AssetIdRemapUtility/Editor/AssetIdRemapUtility.dll.meta" ] },
		{ "Command":"cp", "Arguments": [ "build/targets/resources/$UNITY_VERSION/ProBuilderCore.dll.mdb.meta", "$DST_PB_ROOT/Classes/ProBuilderCore.dll.mdb.meta" ] },
		{ "Command":"cp", "Arguments": [ "build/targets/resources/$UNITY_VERSION/ProBuilderMeshOps.dll.mdb.meta", "$DST_PB_ROOT/Classes/ProBuilderMeshOps.dll.mdb.meta" ] },
		{ "Command":"cp", "Arguments": [ "build/targets/resources/$UNITY_VERSION/ProBuilderEditor.dll.mdb.meta", "$DST_PB_ROOT/Editor/ProBuilderEditor.dll.mdb.meta" ] },
		{ "Command":"cp", "Arguments": [ "build/targets/resources/$UNITY_VERSION/AssetIdRemapUtility.dll.mdb.meta", "$DST_PB_ROOT/AssetIdRemapUtility/Editor/AssetIdRemapUtility.dll.mdb.meta" ] },
		{ "Command":"replace", "Arguments": [ "$DST_PB_ROOT/Editor/Addons/Unity.ProBuilder.AddOns.Editor.asmdef", "\"Unity\\.ProBuilder\\.[a-zA-Z]+\\\"[,]*", ""]}
	],
	"ReferenceSearchPaths":[
		"$UNITY/Data/Mono/lib/mono/2.0",
		"$UNITY/Data/Managed"
	],
	"Assemblies":
	[
		{
			"SourceDirectory": "$SRC_PB_ROOT/Classes/ClassesCore",
			"OutputAssembly": "$DST_PB_ROOT/Classes/ProBuilderCore.dll",
		},
		{
			"SourceDirectory": "$SRC_PB_ROOT/Classes/ClassesEditing",
			"OutputAssembly": "$DST_PB_ROOT/Classes/ProBuilderMeshOps.dll",
			"ReferencedAssemblies": [
				"$DST_PB_ROOT/Classes/ProBuilderCore.dll",
				"$SRC_PB_ROOT/Classes/ClassesLib/pb_Stl.dll",
				"$SRC_PB_ROOT/Classes/ClassesLib/Poly2Tri.dll",
				"$SRC_PB_ROOT/Classes/ClassesLib/KdTreeLib.dll"
			]
		},
		{
			"SourceDirectory": "$SRC_PB_ROOT/AssetIdRemapUtility/Editor",
			"OutputAssembly": "$DST_PB_ROOT/AssetIdRemapUtility/Editor/AssetIdRemapUtility.dll",
			"Defines": [
				"UNITY_EDITOR"
			],
			"ReferencedAssemblies": [
				"UnityEditor.dll"
			]
		},
		{
			"SourceDirectory": "$SRC_PB_ROOT/Editor/EditorCore",
			"OutputAssembly": "$DST_PB_ROOT/Editor/ProBuilderEditor.dll",
			"Defines": [
				"UNITY_EDITOR"
			],
			"ReferencedAssemblies": [
				"UnityEditor.dll",
				"$DST_PB_ROOT/Classes/ProBuilderCore.dll",
				"$DST_PB_ROOT/Classes/ProBuilderMeshOps.dll",
				"$SRC_PB_ROOT/Classes/ClassesLib/pb_Stl.dll",
				"$SRC_PB_ROOT/Classes/ClassesLib/Poly2Tri.dll",
				"$SRC_PB_ROOT/Classes/ClassesLib/KdTreeLib.dll",
				"$DST_PB_ROOT/AssetIdRemapUtility/Editor/AssetIdRemapUtility.dll"
			]
		}
	],
	"OnPostBuild": [
		{ "Command":"cp", "Arguments": [ "$SRC_PB_ROOT/About/changelog.txt", "$BUILD_DIR/CHANGELOG.md" ] },
		{ "Command":"cp", "Arguments": [ "$SRC_PB_ROOT/README.md", "$UPM_PACKAGE_DIR/Documentation/com.unity.probuilder.md" ] },
	]
}
